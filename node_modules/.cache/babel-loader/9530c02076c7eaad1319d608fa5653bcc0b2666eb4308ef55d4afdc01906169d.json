{"ast":null,"code":"import _slicedToArray from\"D:/Github/Leo_log_project/leoblogclient/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Button,Checkbox,FormControl,ListItemText,MenuItem,OutlinedInput,Select,TextField}from\"@mui/material\";import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{useAddPost,useQueryPostTypes}from\"../../hooks/usePost\";import FullTextEditor from\"./components/FullTextEditor/FullTextEditor\";import{FullTextEditDiv,StyledBlogAddBody}from\"./style\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var BlogAddPage=function BlogAddPage(){var history=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),html=_useState2[0],setHtml=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),types=_useState6[0],setTypes=_useState6[1];var _useQueryPostTypes=useQueryPostTypes(),postTypesLoading=_useQueryPostTypes.loading,postTypesData=_useQueryPostTypes._data;var _useAddPost=useAddPost(),addPostFunction=_useAddPost.addPostFunction,loading=_useAddPost.loading;var addNewBlog=function addNewBlog(){var typeIds=types.map(function(type){return postTypesData.find(function(e){return e.type===type;}).id;});addPostFunction({variables:{title:title,context:html,types:typeIds}}).then(function(r){history(\"/leoblogclient/blogs/null\");}).catch(function(error){console.log(error);});};return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading\"}):/*#__PURE__*/_jsxs(StyledBlogAddBody,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"addPage\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Title:\"}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",variant:\"outlined\",inputProps:{\"aria-label\":\"Without label\"},onChange:function onChange(v){return setTitle(v.target.value);}}),/*#__PURE__*/_jsx(\"h3\",{children:\"Types:\"}),/*#__PURE__*/_jsx(FormControl,{sx:{m:0,width:300,mt:3},children:!postTypesLoading&&/*#__PURE__*/_jsx(Select,{multiple:true,displayEmpty:true,value:types,onChange:function onChange(v){return setTypes(typeof v.target.value==\"string\"?v.target.value.split(\",\"):v.target.value);},input:/*#__PURE__*/_jsx(OutlinedInput,{}),renderValue:function renderValue(selected){return selected.join(\", \");},inputProps:{\"aria-label\":\"Without label\"},children:postTypesData.map(function(postType){return/*#__PURE__*/_jsxs(MenuItem,{value:postType.type,children:[/*#__PURE__*/_jsx(Checkbox,{checked:types.indexOf(postType.type)>-1}),/*#__PURE__*/_jsx(ListItemText,{primary:postType.type})]},postType.id);})})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Context:\"}),/*#__PURE__*/_jsx(FullTextEditDiv,{children:/*#__PURE__*/_jsx(FullTextEditor,{html:html,setFullText:function setFullText(e){setHtml(e);}})}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return addNewBlog();},variant:\"contained\",children:\"Submit\"})]})});};export default BlogAddPage;","map":{"version":3,"names":["Button","Checkbox","FormControl","ListItemText","MenuItem","OutlinedInput","Select","TextField","useState","useNavigate","useAddPost","useQueryPostTypes","FullTextEditor","FullTextEditDiv","StyledBlogAddBody","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BlogAddPage","history","_useState","_useState2","_slicedToArray","html","setHtml","_useState3","_useState4","title","setTitle","_useState5","_useState6","types","setTypes","_useQueryPostTypes","postTypesLoading","loading","postTypesData","_data","_useAddPost","addPostFunction","addNewBlog","typeIds","map","type","find","e","id","variables","context","then","r","catch","error","console","log","children","variant","inputProps","onChange","v","target","value","sx","m","width","mt","multiple","displayEmpty","split","input","renderValue","selected","join","postType","checked","indexOf","primary","setFullText","onClick"],"sources":["D:/Github/Leo_log_project/leoblogclient/src/pages/BlogAddPage/BlogAddPage.tsx"],"sourcesContent":["import {\r\n  Button,\r\n  Checkbox,\r\n  FormControl,\r\n  ListItemText,\r\n  MenuItem,\r\n  OutlinedInput,\r\n  Select,\r\n  TextField,\r\n} from \"@mui/material\";\r\nimport { FC, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAddPost, useQueryPostTypes } from \"../../hooks/usePost\";\r\nimport { PostType } from \"../../types/postType\";\r\nimport FullTextEditor from \"./components/FullTextEditor/FullTextEditor\";\r\nimport { FullTextEditDiv, StyledBlogAddBody } from \"./style\";\r\n\r\nconst BlogAddPage: FC = () => {\r\n  const history = useNavigate();\r\n\r\n  const [html, setHtml] = useState<string>(\"\");\r\n  const [title, setTitle] = useState<string>(\"\");\r\n  const [types, setTypes] = useState<string[]>([]);\r\n\r\n  const { loading: postTypesLoading, _data: postTypesData } =\r\n    useQueryPostTypes();\r\n\r\n  const { addPostFunction, loading } = useAddPost();\r\n\r\n  const addNewBlog = () => {\r\n    const typeIds = types.map(\r\n      (type) => postTypesData.find((e: PostType) => e.type === type).id\r\n    );\r\n    addPostFunction({\r\n      variables: { title: title, context: html, types: typeIds },\r\n    })\r\n      .then((r) => {\r\n        history(`/leoblogclient/blogs/null`);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <p>Loading</p>\r\n      ) : (\r\n        <StyledBlogAddBody>\r\n          <h2>addPage</h2>\r\n          <h3>Title:</h3>\r\n          <TextField\r\n            id=\"outlined-basic\"\r\n            variant=\"outlined\"\r\n            inputProps={{ \"aria-label\": \"Without label\" }}\r\n            onChange={(v) => setTitle(v.target.value)}\r\n          />\r\n          <h3>Types:</h3>\r\n          <FormControl sx={{ m: 0, width: 300, mt: 3 }}>\r\n            {!postTypesLoading && (\r\n              <Select\r\n                multiple\r\n                displayEmpty\r\n                value={types}\r\n                onChange={(v) =>\r\n                  setTypes(\r\n                    typeof v.target.value == \"string\"\r\n                      ? v.target.value.split(\",\")\r\n                      : v.target.value\r\n                  )\r\n                }\r\n                input={<OutlinedInput />}\r\n                renderValue={(selected) => selected.join(\", \")}\r\n                inputProps={{ \"aria-label\": \"Without label\" }}\r\n              >\r\n                {postTypesData.map((postType: PostType) => (\r\n                  <MenuItem key={postType.id} value={postType.type}>\r\n                    <Checkbox checked={types.indexOf(postType.type) > -1} />\r\n                    <ListItemText primary={postType.type} />\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            )}\r\n          </FormControl>\r\n          <h3>Context:</h3>\r\n          <FullTextEditDiv>\r\n            <FullTextEditor\r\n              html={html}\r\n              setFullText={(e) => {\r\n                setHtml(e);\r\n              }}\r\n            />\r\n          </FullTextEditDiv>\r\n          <Button onClick={() => addNewBlog()} variant=\"contained\">\r\n            Submit\r\n          </Button>\r\n        </StyledBlogAddBody>\r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport default BlogAddPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}